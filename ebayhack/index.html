<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title></title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="assets/css/style.css">
<link rel="stylesheet" href="assets/css/grid.css">
</head>
<body>
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
<div class="page grid-1">
  <div id="header-container">
    <header class="wrapper clearfix">
      <h1 id="title"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/11/EBay_former_logo.svg/200px-EBay_former_logo.svg.png" width="121" height="48"></h1>
      <h2>My eBay: Analytics</h2>
    </header>
  </div>
  <div id="main-container">
    <div class="right col col2">
    <input type="text" class="search" placeholder="enter keywords" />
      <ul>
        <li id="status">Status
          <menu>
            <p id="1" class="on">
              <input type="checkbox" id="current">
              Current</p>
            <p id="historic">
              <input type="checkbox" id="history">
              Historic</p>
          </menu>
        </li>
        <li id="country">Country
          <menu>
            <p id="1">
                <input type="checkbox" id="russia" checked>
              Russia</p>
            <p id="historic">
              <input type="checkbox" id="france" checked>
              france</p>
          </menu>
        </li>
        <li id="condition">condition
          <menu>
            <p id="1">
              <input type="checkbox" id="new">
              New</p>
            <p id="historic">
              <input type="checkbox" id="used">
              Used</p>
          </menu>
        </li>
      </ul>
    </div>
    <div id="main" class="col col6"> 
      
      <!-- Full width 990px  -->
      <section> 
        <!-- 2 Column -->
        <div class="map">
          <div id='map_canvas'></div>
          <!--<button id="btn_run">run</button>
          <div id="div_result"> </div>-->
        </div>
        <footer class="matrix">
          <ul>
            <li class="col co1" id="ttl-price"><span class="meta">Total products </span><span class="value">Value here</span> </li>
            <li class="col col1" id="ttl-sales"><span class="meta">Total Sales </span><span class="value">Value here</span> </li>
            <li class="col col1" id="high-price"><span class="meta">Highest Price </span><span class="value">Value here</span> </li>
            <li class="col col1" id="low-price"><span class="meta">Lowest Price </span><span class="value">Value here</span> </li>
            <li class="col col1" id="avg-price"><span class="meta">Average price Price </span><span class="value">Value here</span> </li>
          </ul>
        </footer>
      </section>
      <section class="">
        <h2>Product Listing</h2>
        <div class="item">Item</div>
        <div class="item">Item</div>
        <div class="item">Item</div>
      </section>
      
      <!-- Units only --> 
      
    </div>
    <!-- #main --> 
  </div>
  <!-- #main-container --> 
  
</div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
<script type='text/javascript' src='https://www.google.com/jsapi'></script> 
<script src="http://code.jquery.com/ui/1.7.2/jquery-ui.js"></script> 
   <script>
    
            var geomap=null;
            var options = {};
            google.load('visualization', '1', {'packages': ['geomap']});
            google.setOnLoadCallback(drawMap);

            function drawMap() {
                var data = google.visualization.arrayToDataTable([
                    ['Country', 'Average Price'],
                    ['Russia', 200],
                    ['France', 700]
                ]);

      
                
                options['showZoomOut']=true;

                var container = document.getElementById('map_canvas');
                geomap = new google.visualization.GeoMap(container);
                geomap.draw(data, options);
      
                
            };
  
            $(document).ready(function() {
  
                $("#btn_run").click(function(){
                    hello = UpdateMap2(3);
                        
                    hello=  google.visualization.arrayToDataTable(    GenerateDataSetArray(hello.result.data));
      
                 
                    options["colors"] =  [0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747];
                    geomap.draw(hello, options);
                    
                });
                
                 
                
                  if($("#history").click(function(){
                    if($("#history").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  if($("#russia").click(function(){
                    if($("#russia").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  if($("#france").click(function(){
                    if($("#france").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  
                   if($("#history").click(function(){
                    if($("#history").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  
                   if($("#current").click(function(){
                    if($("#current").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  
                   if($("#new").click(function(){
                    if($("#new").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                  
                   if($("#used").click(function(){
                    if($("#used").is(':checked')){
                        $(this).toggleClass("on");
                           
                          }else{
                              $(this).toggleClass("on");
                          }  
                          
                          FilterData();
                      
                  }));
                       
                
                // Handler for .ready() called.
            });
                
            function GenerateDataSetArray(result){
                sb="<table id='tbl_result'>";
                sb=sb+"<tr><td>Country</td><td>Total</td><td>Highest</td><td>Lowest</td><td>Average</td></tr>"
                arr = new Array();
                arr.push( ['Country', 'Popularity']);
                $.each(result, function(i) {
                    sb = sb+ "<tr>";
                    sb = sb+ "<td>";
                    sb = sb+ result[i].Country;
                    sb = sb+ "</td>";
                    sb = sb+ "<td>";
                    sb = sb+ result[i].TotalItem;
                    sb = sb+ "</td>";
                    sb = sb+ "<td>";
                    sb = sb+ result[i].Highest;
                    sb = sb+ "</td>";
                    sb = sb+ "<td>";
                    sb = sb+ result[i].Lowerest;
                    sb = sb+ "</td>";
                    sb = sb+ "</tr>";
                    // alert(result[i].product);
                    arr.push([result[i].Country,result[i].Average]);
                });
                sb = sb + "</table>";
                $("#div_result").html(sb);
                return arr;    
            }
                
                
            function UpdateMap(){
                    
                    
                productDataCurrentNew = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"450"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"479"},
                            //{"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"399"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"400"}  
                        ], "conditionStatus": "new", "timeStatus":"Current"}};
                productDataCurrentUsed = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"450"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"479"},
                            //{"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"399"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"400"}  
                        ], "conditionStatus": "used", "timeStatus":"Current"}};
                    
                productDataHistoryNew = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"450"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"479"},
                           // {"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"399"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"400"}  
                        ], "conditionStatus": "new", "timeStatus":"History"}};
                productData = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"450"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"479"},
                            //{"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"399"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"400"}  
                        ], "conditionStatus": "used", "timeStatus":"History"}};
                
                
                return productData;
            }
            
            function UpdateMap2(condition){
                    
                   
                productDataCurrentNew = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"450"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"479"},
                      //      {"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"399"},
                        //    {"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"400"}  
                        ], "conditionStatus": "new", "timeStatus":"Current"}};
                productDataCurrentUsed = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"350"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"379"},
                          //  {"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"299"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"300"}  
                        ], "conditionStatus": "used", "timeStatus":"Current"}};
                    
                productDataHistoryNew = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"550"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"579"},
                            //{"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"499"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"500"}  
                        ], "conditionStatus": "new", "timeStatus":"History"}};
                productDataHistoryUsed = {result:{data:[
                            {"Country":"Russia", "product":"iPhone5","TotalItem":"100", "Highest":"799", "Lowerest":"299", "Average":"200"},
                            {"Country":"France", "product":"iPhone5","TotalItem":"1000", "Highest":"699", "Lowerest":"399", "Average":"250"},
                            //{"Country":"US", "product":"iPhone5","TotalItem":"2000", "Highest":"650", "Lowerest":"350", "Average":"220"},
                            //{"Country":"Japan", "product":"iPhone5","TotalItem":"200", "Highest":"699", "Lowerest":"359", "Average":"350"}  
                        ], "conditionStatus": "used", "timeStatus":"History"}};
                
                
                //return [productDataCurrentNew,productDataCurrentUsed,productDataHistoryNew,productDataHistoryUsed];
                
                if(condition=="1"){
                    product =productDataCurrentNew;
                 
                }else if(condition=="2"){
                    product =productDataCurrentUsed;
                }
                else if(condition=="3"){
                    product =productDataHistoryNew;
                }else if(condition=="4"){
                    product =productDataHistoryUsed;
                }
                return product;
            }


            function FilterData(){
                conditionStatus = "n"; //N , U, Both
                timeStatus = "c";//C or H, Both
                countryArray=new Array();
                     hello = UpdateMap2(3);
                     
                      if($("#history").is(':checked')){
                     hello = UpdateMap2(1);
                          
                      }else if($("#current").is(':checked')){
                          hello = UpdateMap2(2);
                     
                      }else if($("#used").is(':checked')){
                     hello = UpdateMap2(3);
                          
                      }else{
                          hello = UpdateMap2(4);
                     
                      }
                        
                        dataset = hello.result.data;
                         
                        $.each(dataset, function(index) {
                            //alert(dataset);
                        
                        if(!$("#france").is(':checked')){
      if(dataset[index].Country == "France") {
          //Remove from array
           dataset[index].Country="";
      }
                       
                        }
                        if(!$("#russia").is(':checked')){
      if(dataset[index].Country == "Russia") {
          //Remove from array
           dataset[index].Country="";
      }
                       
                        }
                        });
                        
                        dataset= GenerateDataSetArray(dataset);
                    hello=  google.visualization.arrayToDataTable( dataset  );
      
                 
                    options["colors"] =  [0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747, 0xFF8747];
                    geomap.draw(hello, options);
                    
            }
            
          
       
   

        </script>
</body>
</html>
